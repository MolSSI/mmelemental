

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Design &mdash; MMElemental</title>
  

  
  <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="static/documentation_options.js"></script>
        <script src="static/jquery.js"></script>
        <script src="static/underscore.js"></script>
        <script src="static/doctools.js"></script>
    
    <script type="text/javascript" src="static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Molecules" href="molecules.html" />
    <link rel="prev" title="Prerequisites" href="get_started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: light-blue" >
          

          
            <a href="index.html">
          

          
            
            <img src="static/mmel_logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="get_started.html">Prerequisites</a><ul>
<li class="toctree-l2"><a class="reference internal" href="get_started.html#quick-installation">Quick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="get_started.html#dev-installation">Dev Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="get_started.html#requirements">Requirements</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#components">Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#translation">Translation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#validation">Validation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Modules:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="molecules.html">Molecules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="molecules.html#topology">Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="molecules.html#molecule">Molecule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="molecules.html#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="molecules.html#module-mmelemental.models.struct.molecule">API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="forcefields.html">Force fields</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forcefields.html#forcefield">ForceField</a><ul>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="forcefields.html#nonbonded">NonBonded</a><ul>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#nbdescr">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#nbapi">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="forcefields.html#bonds">Bonds</a><ul>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#bondsdescr">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#bondsapi">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="forcefields.html#angles">Angles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#anglesdescr">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#anglesapi">API</a></li>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#dihedrals">Dihedrals</a></li>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#improper-dihedrals">Improper dihedrals</a></li>
<li class="toctree-l3"><a class="reference internal" href="forcefields.html#dihedralsapi">API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="collections.html">Collections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="collections.html#trajectory">Trajectory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collections.html#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="collections.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="collections.html#ensemble">Ensemble</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collections.html#ensemble-descr">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="collections.html#ensemble-api">API</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials_mol.html">Molecule</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials_mol.html#overview-instantiation">Overview &amp; Instantiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_mol.html#topological-data">Topological data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_mol.html#i-o-operations">I/O operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials_mol.html#file-operations">File operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials_mol.html#data-conversion">Data conversion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_mol.html#coarse-graining">Coarse-graining</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_mol.html#validation">Validation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials_ff.html">Force fields</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials_ff.html#instantiation">Instantiation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials_ff.html#functional-form">Functional form</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_ff.html#parametrized-molecules">Parametrized molecules</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_ff.html#i-o-operations">I/O operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials_ff.html#file-operations">File operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials_ff.html#data-conversion">Data conversion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_ff.html#coarse-graining">Coarse-graining</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_ff.html#validation">Validation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials_traj.html">Trajectory</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials_debug.html">Debugging</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MMElemental</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Design</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="sources/design.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="design">
<h1>Design<a class="headerlink" href="#design" title="Permalink to this headline">Â¶</a></h1>
<p>MMElemental is strictly a python implementation of the <a class="reference external" href="https://molssi.github.io/mmschema">MMSchema</a> specification i.e. its main focus is on data classes, which are implemented in the form of <a class="reference external" href="https://sphinx-pydantic.readthedocs.io">pydantic</a> models. MMElemental
natively supports few common data formats such as JSON, YAML, and HDF5. In order to parse MM-specific file formats (sdf, mmCIF, PDB, etc.), MMElemental uses <a class="reference external" href="https://molssi.github.io/mmic_translator">mmic_translator</a>, which
is a general-purpose component (part of the <a class="reference external" href="https://github.com/MolSSI/mmic">MMIC</a> project) that enables converting between different data/file representations and MMSchema. Both model and components MMElemental
provides/supports are explained in the next subsections.</p>
<div class="section" id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this headline">Â¶</a></h2>
<p>All models in MMElemental are immutable data-centric classes, which provide serialization and data validation methods based on the <a class="reference external" href="https://sphinx-pydantic.readthedocs.io">pydantic</a> library.</p>
<a class="reference internal image-reference" href="images/mmel_mmschema.png"><img alt="images/mmel_mmschema.png" class="align-center" src="images/mmel_mmschema.png" style="width: 156.20000000000002px; height: 510.40000000000003px;" /></a>
<p>Each model has a set of fields that, when suitable, are used to automatically generate a unique hash
that enables each object to be uniquely identified and check for file integrity. Furthermore, any model
that stores physical quantities in its fields provides the associated units field as well (unless itâs dimensionless).</p>
<p>A UML diagram that summarizes some of the properties and methods found in a core MMElemental model is shown below.
All <cite>Model</cite> implementations are subclasses of <cite>ProtoModel</cite> from the <a class="reference external" href="https://github.com/MolSSI/cmselemental">CMSElemental</a> package, which serves as the backbone of MMElemental.</p>
<a class="reference internal image-reference" href="images/model.png"><img alt="images/model.png" class="align-center" src="images/model.png" style="width: 286.40000000000003px; height: 286.40000000000003px;" /></a>
<p>The constructor/writer methods are available in models that support reading/writing common file formats or converting to other
data objects. The <cite>default_units</cite> is a class property that returns whatever default physical units a particular model stores,
while the instance property <cite>units</cite> returns the physical units assigned to the object after instantiation.</p>
</div>
<div class="section" id="components">
<h2>Components<a class="headerlink" href="#components" title="Permalink to this headline">Â¶</a></h2>
<p>There are 2 distinct classes of MM components we distinguish in MMElemental: strategy and tactic. The former defines general i/o schemas for a specific domain while the latter
is a realization of the former. See <a class="reference external" href="https://github.com/MolSSI/mmic">MMIC</a> for a more in-depth description.</p>
<a class="reference internal image-reference" href="images/mmic-comps.png"><img alt="images/mmic-comps.png" class="align-center" src="images/mmic-comps.png" style="width: 582.4px; height: 451.1px;" /></a>
<div class="section" id="translation">
<h3>Translation<a class="headerlink" href="#translation" title="Permalink to this headline">Â¶</a></h3>
<p>For the purpose of converting between different data/file representations or translating between different specifications, <a class="reference external" href="https://molssi.github.io/mmic_translator">mmic_translator</a> can hook up to specific tactic components.</p>
<a class="reference internal image-reference" href="images/mmel-mmic.png"><img alt="images/mmel-mmic.png" class="align-center" src="images/mmel-mmic.png" style="width: 494.4px; height: 737.4px;" /></a>
<p>By default, MMElemental selects an appropriate tactic converter based on the run-time selection used in <a class="reference external" href="https://molssi.github.io/mmic_translator">mmic_translator</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mol</span> <span class="o">=</span> <span class="n">mmelemental</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Molecule</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">grofile</span><span class="p">)</span>
</pre></div>
</div>
<p>All debug information is stored in the <cite>extras</cite> field in mmschema_molecule. However, to access additional info on which tactic translator was used, we need to pass <cite>debug=True</cite>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mol</span> <span class="o">=</span> <span class="n">mmelemental</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Molecule</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">grofile</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mol</span><span class="o">.</span><span class="n">extras</span><span class="p">[</span><span class="s2">&quot;mmic_translator&quot;</span><span class="p">]</span>
<span class="go">    {</span>
<span class="go">        &quot;routine&quot;: &quot;mmelemental.models.struct.molecule.Molecule.from_file&quot;,</span>
<span class="go">        &quot;translator&quot;: (&quot;mmic_mda&quot;, &quot;0+untagged.149.gaadacf3&quot;),</span>
<span class="go">        &quot;engine&quot;: (&quot;MDAnalysis&quot;, &quot;2.0.0&quot;),</span>
<span class="go">        &quot;model&quot;: &lt;class &#39;mmic_mda.models.mol.MdaMol&#39;&gt;,</span>
<span class="go">    }</span>
</pre></div>
</div>
<p>In this case, MMElemental chose <cite>mmic_mda</cite> (based on MDAnalysis) to parse the grofile. In order to instruct mmelemental to use a different tactic translator, we need to manually specify which
tactic translator to use i.e.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mol</span> <span class="o">=</span> <span class="n">mmelemental</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Molecule</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">grofile</span><span class="p">,</span> <span class="n">translator</span><span class="o">=</span><span class="s2">&quot;mmic_parmed&quot;</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mol</span><span class="o">.</span><span class="n">extras</span><span class="p">[</span><span class="s2">&quot;mmic_translator&quot;</span><span class="p">]</span>
<span class="go">    {</span>
<span class="go">        &quot;routine&quot;: &quot;mmelemental.models.struct.molecule.Molecule.from_file&quot;,</span>
<span class="go">        &quot;translator&quot;: (&quot;mmic_parmed&quot;, &quot;0+untagged.235.gf48a39d&quot;),</span>
<span class="go">        &quot;engine&quot;: (&quot;parmed&quot;, &quot;3.4.0+16.gcac50320&quot;),</span>
<span class="go">        &quot;model&quot;: &lt;class &#39;mmic_parmed.models.mol.ParmedMol&#39;&gt;,</span>
<span class="go">    }</span>
</pre></div>
</div>
<p>In this case, we forced MMElemental to use <cite>mmic_parmed</cite> instead. If the requested tactic component is unavailable or unspported, MMElemental will pass whatever exception <a class="reference external" href="https://molssi.github.io/mmic_translator">mmic_translator</a> raises instead.</p>
</div>
<div class="section" id="validation">
<h3>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">Â¶</a></h3>
<p>Not yet available.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="molecules.html" class="btn btn-neutral float-right" title="Molecules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="get_started.html" class="btn btn-neutral float-left" title="Prerequisites" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, MolSSI. Project structure based on the Computational Molecular Science Python Cookiecutter version 1.5.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #033e57;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #080f14;
    }
  </style>


</body>
</html>